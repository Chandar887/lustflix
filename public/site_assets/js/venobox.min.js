!function(a){function e(){a.ajax({url:k,cache:!1}).done(function(a){p.html('<div class="vbox-inline">'+a+"</div>"),s()}).fail(function(){p.html('<div class="vbox-inline"><p>Error retrieving contents, please retry</div>'),c()})}function o(){p.html('<iframe class="venoframe" src="'+k+'"></iframe>'),c()}function t(a,e){var o,t,i=a?"?rel=0&autoplay=1":"?rel=0";if("vimeo"==e){o="https://player.vimeo.com/video/";var s=k.split("/");t=s[s.length-1]}else o="https://www.youtube.com/embed/",t=function(a){var e="";return e=void 0!==(a=a.replace(/(>|<)/gi,"").split(/(vi\/|v=|\/v\/|youtu\.be\/|\/embed\/)/))[2]?(e=a[2].split(/[^0-9a-z_\-]/i))[0]:a,e}(k);p.html('<iframe class="venoframe vbvid" webkitallowfullscreen mozallowfullscreen allowfullscreen frameborder="0" src="'+o+t+i+'"></iframe>'),c()}function i(){p.html('<div class="vbox-inline">'+a(k).html()+"</div>"),c()}function s(){images=a(".vbox-content").find("img"),images.length?images.each(function(){a(this).one("load",function(){c()})}):c()}function c(){v.html(j),p.find(">:first-child").addClass("figlio"),a(".figlio").css("width",m).css("height",h).css("padding",b).css("background",l),n(),p.animate({opacity:"1"},"slow",A(p,d,v))}function n(){E=p.outerHeight(),(D=a(window).height())>E+30?(w=(D-E)/2,p.css("margin-top",w),p.css("margin-bottom",w)):(p.css("margin-top","30px"),p.css("margin-bottom","30px")),F(p,d,v)}var r,l,d,v,b,u,p,k,f,m,h,x,g,y,w,C,_,B,j,z,q,P,D,E,H,Q,T,A,F;a.fn.extend({venobox:function(c){var n=a.extend({arrowsColor:"#B6B6B6",autoplay:!1,bgcolor:"#fff",border:"0",closeBackground:"#161617",closeColor:"#d2d2d2",framewidth:"",frameheight:"",infinigall:!1,numeratio:!1,numerationBackground:"#161617",numerationColor:"#d2d2d2",numerationPosition:"top",overlayClose:!0,overlayColor:"rgba(23,23,23,0.85)",spinner:"double-bounce",spinColor:"#d2d2d2",titleattr:"title",titleBackground:"#161617",titleColor:"#d2d2d2",titlePosition:"top",pre_open_callback:function(){return!0},post_open_callback:function(){},pre_close_callback:function(){return!0},post_close_callback:function(){},post_resize_callback:function(){}},c);return this.each(function(){var c=a(this);return!!c.data("venobox")||(c.addClass("vbox-item"),c.data("framewidth",n.framewidth),c.data("frameheight",n.frameheight),c.data("border",n.border),c.data("bgcolor",n.bgcolor),c.data("numeratio",n.numeratio),c.data("infinigall",n.infinigall),c.data("overlaycolor",n.overlayColor),c.data("titleattr",n.titleattr),A=n.post_open_callback,F=n.post_resize_callback,c.data("venobox",!0),void c.on("click",function(w){function D(){z=c.data("gall"),C=c.data("numeratio"),x=c.data("infinigall"),(g=a('.vbox-item[data-gall="'+z+'"]')).length>1&&!0===C?(d.html(g.index(c)+1+" / "+g.length),d.show()):d.hide(),q=g.eq(g.index(c)+1),P=g.eq(g.index(c)-1),""!==j?v.show():v.hide(),g.length>1&&!0===x?(H=!0,Q=!0,q.length<1&&(q=g.eq(0)),g.index(c)<1&&(P=g.eq(g.index(g.length)))):(q.length>0?(a(".vbox-next").css("display","block"),H=!0):(a(".vbox-next").css("display","none"),H=!1),g.index(c)>0?(a(".vbox-prev").css("display","block"),Q=!0):(a(".vbox-prev").css("display","none"),Q=!1))}function E(a){27===a.keyCode&&A()}function A(){var e=n.pre_close_callback(c,p,d,v);(null==e||e)&&(a("body").removeClass("vbox-open"),a("body").off("keydown",E),B.animate({opacity:0},500,function(){B.remove(),y=!1,c.focus(),n.post_close_callback(c,p,d,v)}))}w.preventDefault(),c=a(this);var F=n.pre_open_callback(c);if(null==F||F){switch(_=c.data("overlay")||c.data("overlaycolor"),m=c.data("framewidth"),h=c.data("frameheight"),r=c.data("autoplay")||n.autoplay,b=c.data("border"),l=c.data("bgcolor"),H=!1,Q=!1,y=!1,k=c.data("href")||c.attr("href"),f=c.data("css")||"",j=c.attr(c.data("titleattr"))||"",a("body").addClass("vbox-open"),T='<div class="vbox-preloader">',n.spinner){case"rotating-plane":T+='<div class="sk-rotating-plane"></div>';break;case"double-bounce":T+='<div class="sk-double-bounce"><div class="sk-child sk-double-bounce1"></div><div class="sk-child sk-double-bounce2"></div></div>';break;case"wave":T+='<div class="sk-wave"><div class="sk-rect sk-rect1"></div><div class="sk-rect sk-rect2"></div><div class="sk-rect sk-rect3"></div><div class="sk-rect sk-rect4"></div><div class="sk-rect sk-rect5"></div></div>';break;case"wandering-cubes":T+='<div class="sk-wandering-cubes"><div class="sk-cube sk-cube1"></div><div class="sk-cube sk-cube2"></div></div>';break;case"spinner-pulse":T+='<div class="sk-spinner sk-spinner-pulse"></div>';break;case"three-bounce":T+='<div class="sk-three-bounce"><div class="sk-child sk-bounce1"></div><div class="sk-child sk-bounce2"></div><div class="sk-child sk-bounce3"></div></div>';break;case"cube-grid":T+='<div class="sk-cube-grid"><div class="sk-cube sk-cube1"></div><div class="sk-cube sk-cube2"></div><div class="sk-cube sk-cube3"></div><div class="sk-cube sk-cube4"></div><div class="sk-cube sk-cube5"></div><div class="sk-cube sk-cube6"></div><div class="sk-cube sk-cube7"></div><div class="sk-cube sk-cube8"></div><div class="sk-cube sk-cube9"></div></div>'}T+="</div>",'<a class="vbox-next"><span>next</span></a><a class="vbox-prev"><span>prev</span></a>',vbheader='<div class="vbox-title"></div><div class="vbox-num">0/0</div><div class="vbox-close">&times;</div>',u='<div class="vbox-overlay '+f+'" style="background:'+_+'">'+T+'<div class="vbox-container"><div class="vbox-content"></div></div>'+vbheader+'<a class="vbox-next"><span>next</span></a><a class="vbox-prev"><span>prev</span></a></div>',a("body").append(u),a(".vbox-preloader .sk-child, .vbox-preloader .sk-rotating-plane, .vbox-preloader .sk-rect, .vbox-preloader .sk-cube, .vbox-preloader .sk-spinner-pulse").css("background-color",n.spinColor),B=a(".vbox-overlay"),a(".vbox-container"),p=a(".vbox-content"),d=a(".vbox-num"),(v=a(".vbox-title")).css(n.titlePosition,"-1px"),v.css({color:n.titleColor,"background-color":n.titleBackground}),a(".vbox-close").css({color:n.closeColor,"background-color":n.closeBackground}),a(".vbox-num").css(n.numerationPosition,"-1px"),a(".vbox-num").css({color:n.numerationColor,"background-color":n.numerationBackground}),a(".vbox-next span, .vbox-prev span").css({"border-top-color":n.arrowsColor,"border-right-color":n.arrowsColor}),p.html(""),p.css("opacity","0"),D(),B.animate({opacity:1},250,function(){"iframe"==c.data("vbtype")?o():"inline"==c.data("vbtype")?i():"ajax"==c.data("vbtype")?e():"vimeo"==c.data("vbtype")?t(r,"vimeo"):"youtube"==c.data("vbtype")?t(r,"youtube"):(p.html('<img src="'+k+'">'),s())});var G={prev:function(){y||(y=!0,_=P.data("overlay")||P.data("overlaycolor"),m=P.data("framewidth"),h=P.data("frameheight"),b=P.data("border"),l=P.data("bgcolor"),k=P.data("href")||P.attr("href"),r=P.data("autoplay"),j=P.attr(P.data("titleattr"))||"",p.animate({opacity:0},500,function(){B.css("background",_),"iframe"==P.data("vbtype")?o():"inline"==P.data("vbtype")?i():"ajax"==P.data("vbtype")?e():"youtube"==P.data("vbtype")?t(r,"youtube"):"vimeo"==P.data("vbtype")?t(r,"vimeo"):(p.html('<img src="'+k+'">'),s()),c=P,D(),y=!1}))},next:function(){y||(y=!0,_=q.data("overlay")||q.data("overlaycolor"),m=q.data("framewidth"),h=q.data("frameheight"),b=q.data("border"),l=q.data("bgcolor"),k=q.data("href")||q.attr("href"),r=q.data("autoplay"),j=q.attr(q.data("titleattr"))||"",p.animate({opacity:0},500,function(){B.css("background",_),"iframe"==q.data("vbtype")?o():"inline"==q.data("vbtype")?i():"ajax"==q.data("vbtype")?e():"youtube"==q.data("vbtype")?t(r,"youtube"):"vimeo"==q.data("vbtype")?t(r,"vimeo"):(p.html('<img src="'+k+'">'),s()),c=q,D(),y=!1}))}};a("body").keydown(function(a){37==a.keyCode&&1==Q&&G.prev(),39==a.keyCode&&1==H&&G.next()}),a(".vbox-prev").click(function(){G.prev()}),a(".vbox-next").click(function(){G.next()});var I=".vbox-overlay";return n.overlayClose||(I=".vbox-close"),a(I).click(function(e){(a(e.target).is(".vbox-overlay")||a(e.target).is(".vbox-content")||a(e.target).is(".vbox-close")||a(e.target).is(".vbox-preloader"))&&A()}),a("body").keydown(E),!1}}))})}}),a(window).resize(function(){a(".vbox-content").length&&setTimeout(n(),800)})}(jQuery);